{
  "appName": "Incident Autopilot Dashboard",
  "appDescription": "Multi-Agent Incident Response Control Tower with Guardrails",
  "version": "1.0.0",
  "resources": [
    {
      "name": "incident_api",
      "type": "restapi",
      "displayName": "Incident Autopilot API",
      "options": {
        "baseUrl": "http://localhost:8000/api",
        "headers": {},
        "authentication": "none"
      }
    }
  ],
  "queries": [
    {
      "name": "getStatistics",
      "resourceName": "incident_api",
      "resourceDisplayName": "Incident Autopilot API",
      "query": "/statistics",
      "queryType": "GET",
      "transformer": "",
      "runWhenPageLoads": true,
      "successEvent": [],
      "failureEvent": [],
      "confirmationMessage": "",
      "enableTransformer": false,
      "showSuccessToaster": false,
      "showFailureToaster": true,
      "queryRefreshTime": "5000"
    },
    {
      "name": "getIncidents",
      "resourceName": "incident_api",
      "resourceDisplayName": "Incident Autopilot API",
      "query": "/incidents",
      "queryType": "GET",
      "transformer": "",
      "runWhenPageLoads": true,
      "successEvent": [],
      "failureEvent": [],
      "confirmationMessage": "",
      "enableTransformer": false,
      "showSuccessToaster": false,
      "showFailureToaster": true,
      "queryRefreshTime": "5000"
    },
    {
      "name": "getIncidentDetail",
      "resourceName": "incident_api",
      "resourceDisplayName": "Incident Autopilot API",
      "query": "/incidents/{{selectedIncident.value}}",
      "queryType": "GET",
      "transformer": "",
      "runWhenPageLoads": false,
      "successEvent": [],
      "failureEvent": [],
      "confirmationMessage": "",
      "enableTransformer": false,
      "showSuccessToaster": false,
      "showFailureToaster": true
    },
    {
      "name": "simulateIncident",
      "resourceName": "incident_api",
      "resourceDisplayName": "Incident Autopilot API",
      "query": "/incidents/simulate?incident_type={{incidentTypeSelect.value}}&auto_approve=true",
      "queryType": "POST",
      "transformer": "",
      "runWhenPageLoads": false,
      "successEvent": [
        {
          "type": "query",
          "method": "trigger",
          "queryName": "getIncidents"
        },
        {
          "type": "query",
          "method": "trigger",
          "queryName": "getStatistics"
        }
      ],
      "failureEvent": [],
      "confirmationMessage": "",
      "enableTransformer": false,
      "showSuccessToaster": true,
      "showFailureToaster": true
    }
  ],
  "components": [
    {
      "type": "container",
      "id": "header",
      "position": { "x": 0, "y": 0, "width": 24, "height": 2 },
      "children": [
        {
          "type": "text",
          "id": "title",
          "value": "ðŸš¨ Incident Autopilot",
          "position": { "x": 0, "y": 0, "width": 18, "height": 1 },
          "style": {
            "fontSize": "32px",
            "fontWeight": "bold",
            "color": "#667eea"
          }
        },
        {
          "type": "text",
          "id": "subtitle",
          "value": "Multi-Agent Incident Response with Guardrails",
          "position": { "x": 0, "y": 1, "width": 18, "height": 1 },
          "style": {
            "fontSize": "16px",
            "color": "#666"
          }
        }
      ]
    },
    {
      "type": "container",
      "id": "statsContainer",
      "position": { "x": 0, "y": 2, "width": 24, "height": 3 },
      "children": [
        {
          "type": "statistic",
          "id": "totalIncidents",
          "label": "TOTAL INCIDENTS",
          "value": "{{getStatistics.data.total_incidents || 0}}",
          "position": { "x": 0, "y": 0, "width": 6, "height": 3 },
          "style": {
            "primaryColor": "#667eea",
            "labelSize": "12px",
            "valueSize": "36px"
          }
        },
        {
          "type": "statistic",
          "id": "detectionLatency",
          "label": "DETECTION LATENCY",
          "value": "{{(getStatistics.data.avg_detection_latency || 0).toFixed(1)}}",
          "suffix": "s",
          "position": { "x": 6, "y": 0, "width": 6, "height": 3 },
          "style": {
            "primaryColor": "#667eea",
            "labelSize": "12px",
            "valueSize": "36px"
          }
        },
        {
          "type": "statistic",
          "id": "timeToMitigation",
          "label": "TIME TO MITIGATION",
          "value": "{{(getStatistics.data.avg_time_to_mitigation || 0).toFixed(1)}}",
          "suffix": "s",
          "position": { "x": 12, "y": 0, "width": 6, "height": 3 },
          "style": {
            "primaryColor": "#667eea",
            "labelSize": "12px",
            "valueSize": "36px"
          }
        },
        {
          "type": "statistic",
          "id": "successRate",
          "label": "SUCCESS RATE",
          "value": "{{(getStatistics.data.success_rate || 0).toFixed(0)}}",
          "suffix": "%",
          "position": { "x": 18, "y": 0, "width": 6, "height": 3 },
          "style": {
            "primaryColor": "#667eea",
            "labelSize": "12px",
            "valueSize": "36px"
          }
        }
      ]
    },
    {
      "type": "container",
      "id": "mainContent",
      "position": { "x": 0, "y": 5, "width": 24, "height": 20 },
      "children": [
        {
          "type": "container",
          "id": "incidentsPanel",
          "position": { "x": 0, "y": 0, "width": 16, "height": 20 },
          "children": [
            {
              "type": "text",
              "id": "incidentsTitle",
              "value": "Recent Incidents",
              "position": { "x": 0, "y": 0, "width": 10, "height": 1 },
              "style": {
                "fontSize": "24px",
                "fontWeight": "bold"
              }
            },
            {
              "type": "select",
              "id": "incidentTypeSelect",
              "label": "Incident Type",
              "position": { "x": 10, "y": 0, "width": 3, "height": 1 },
              "data": [
                { "label": "Random", "value": "" },
                { "label": "Latency Spike", "value": "latency_spike" },
                { "label": "Error Rate", "value": "error_rate" },
                { "label": "Resource Saturation", "value": "resource_saturation" },
                { "label": "Queue Depth", "value": "queue_depth" }
              ],
              "value": ""
            },
            {
              "type": "button",
              "id": "simulateButton",
              "text": "ðŸš€ Simulate Incident",
              "position": { "x": 13, "y": 0, "width": 3, "height": 1 },
              "style": {
                "background": "#667eea",
                "color": "white"
              },
              "event": [
                {
                  "type": "query",
                  "method": "trigger",
                  "queryName": "simulateIncident"
                }
              ]
            },
            {
              "type": "table",
              "id": "incidentsTable",
              "position": { "x": 0, "y": 1, "width": 16, "height": 19 },
              "data": "{{getIncidents.data.incidents}}",
              "columns": [
                {
                  "name": "id",
                  "label": "Incident ID",
                  "type": "string",
                  "width": "25%"
                },
                {
                  "name": "severity",
                  "label": "Severity",
                  "type": "tag",
                  "width": "12%",
                  "tagColor": "{{currentRow.severity === 'critical' ? 'red' : currentRow.severity === 'high' ? 'orange' : currentRow.severity === 'medium' ? 'yellow' : 'green'}}"
                },
                {
                  "name": "service_name",
                  "label": "Service",
                  "type": "string",
                  "width": "18%"
                },
                {
                  "name": "incident_type",
                  "label": "Type",
                  "type": "string",
                  "width": "20%"
                },
                {
                  "name": "stage",
                  "label": "Stage",
                  "type": "tag",
                  "width": "15%",
                  "tagColor": "{{currentRow.stage === 'completed' ? 'green' : currentRow.stage === 'failed' ? 'red' : 'blue'}}"
                },
                {
                  "name": "start_time",
                  "label": "Started",
                  "type": "datetime",
                  "width": "10%"
                }
              ],
              "showSearch": true,
              "showPagination": true,
              "rowSelection": "single",
              "selectedRow": "{{selectedIncident}}",
              "onRowClick": [
                {
                  "type": "state",
                  "method": "setValue",
                  "stateName": "selectedIncident",
                  "value": "{{currentRow.id}}"
                },
                {
                  "type": "query",
                  "method": "trigger",
                  "queryName": "getIncidentDetail"
                }
              ]
            }
          ]
        },
        {
          "type": "container",
          "id": "timelinePanel",
          "position": { "x": 16, "y": 0, "width": 8, "height": 20 },
          "children": [
            {
              "type": "text",
              "id": "timelineTitle",
              "value": "Pipeline Status",
              "position": { "x": 0, "y": 0, "width": 8, "height": 1 },
              "style": {
                "fontSize": "24px",
                "fontWeight": "bold"
              }
            },
            {
              "type": "listview",
              "id": "timelineList",
              "position": { "x": 0, "y": 1, "width": 8, "height": 19 },
              "data": "{{getIncidentDetail.data.timeline || []}}",
              "itemHeight": 100,
              "showSearch": false,
              "template": {
                "children": [
                  {
                    "type": "container",
                    "style": {
                      "borderLeft": "4px solid #667eea",
                      "paddingLeft": "16px",
                      "marginBottom": "16px"
                    },
                    "children": [
                      {
                        "type": "text",
                        "value": "{{currentItem.stage.toUpperCase()}}",
                        "style": {
                          "fontSize": "16px",
                          "fontWeight": "bold",
                          "color": "#667eea",
                          "marginBottom": "8px"
                        }
                      },
                      {
                        "type": "text",
                        "value": "{{currentItem.message}}",
                        "style": {
                          "fontSize": "14px",
                          "color": "#666",
                          "marginBottom": "8px"
                        }
                      },
                      {
                        "type": "text",
                        "value": "{{new Date(currentItem.timestamp).toLocaleTimeString()}}",
                        "style": {
                          "fontSize": "12px",
                          "color": "#999"
                        }
                      }
                    ]
                  }
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "globalStyles": {
    "primaryColor": "#667eea",
    "canvasBackground": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
    "fontFamily": "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif"
  }
}

